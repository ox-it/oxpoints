<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Gaboto [
    <!ENTITY oxp "http://ns.ox.ac.uk/namespace/oxpoints/2009/02/owl#" >
    <!ENTITY foaf "http://xmlns.com/foaf/0.1/" >
    <!ENTITY dc "http://purl.org/dc/elements/1.1/" >
    <!ENTITY dct "http://purl.org/dc/terms/" >
    <!ENTITY vCard "http://nwalsh.com/rdf/vCard#" >
    <!ENTITY gml "http://www.opengis.net/gml/" >
    <!ENTITY gabotoKML "http://ns.ox.ac.uk/namespace/gaboto/kml/2009/03/owl#" >
    <!ENTITY xhtml "http://www.w3.org/1999/xhtml" >
    <!ENTITY exif "http://www.w3.org/2003/12/exif/ns#" >
    <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
    <!ENTITY geo "http://www.w3.org/2003/01/geo/wgs84_pos#" >
]>
<Gaboto xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <config>
        <lookupClass class="uk.ac.ox.oucs.oxpoints.gaboto.OxpointsGabotoOntologyLookup" />
        <namespaces graphs="http://ns.ox.ac.uk/namespaces/oxpoints/graphs#"
            data="http://m.ox.ac.uk/oxpoints/id/" images="http://m.ox.ac.uk/images/" />

        <namespacePrefixes>
            <namespacePrefix prefix="oxp" ns="&oxp;"/>
            <namespacePrefix prefix="foaf" ns="&foaf;"/>
            <namespacePrefix prefix="dc" ns="&dc;"/>
            <namespacePrefix prefix="dct" ns="&dct;"/>
            <namespacePrefix prefix="vCard" ns="&vCard;"/>
            <namespacePrefix prefix="gml" ns="&gml;"/>
            <namespacePrefix prefix="geo" ns="&geo;"/>
            <namespacePrefix prefix="gabotoKML" ns="&gabotoKML;"/>
            <namespacePrefix prefix="xhtml" ns="&xhtml;"/>
            <namespacePrefix prefix="exif" ns="&exif;"/>
            <namespacePrefix prefix="owl" ns="&owl;"/>
        </namespacePrefixes>

        <database>
            <!-- We have our own copy of the driver, there is a bug in the jena one -->
            <engineName>HSQLDB_GABOTO</engineName>
            <!-- 
                <url>jdbc:hsqldb:/dist/gaboto/db/oxpoints</url>
            -->
            <url>jdbc:hsqldb:mem:oxpoints</url>
            <user>sa</user>
            <password/>
            <driver>org.hsqldb.jdbcDriver</driver>
            <!--
            <engineName>PostgreSQL</engineName>
            <url>jdbc:postgresql:oxpoints</url>
            <user>postgres</user>
            <password></password>    
            <driver>org.postgresql.Driver</driver>
            -->
            <!--
                <engineName>PostgreSQL</engineName>
                <url>jdbc:postgresql://sysdev-db1.oucs.ox.ac.uk:5432/oxpoints?ssl=true</url>
                <user>oxpoints_web</user>
                <password>2iBRosz=arg.T</password>
                <driver>org.postgresql.Driver</driver>
            -->
            <!--
            <engineName>MySQL</engineName>
            <url>jdbc:mysql://localhost/oxp</url>
            <user>root</user>
            <password></password>
            <driver>com.mysql.jdbc.Driver</driver>
            -->
        </database>
    </config>


    <GabotoBeans>
        <GabotoBean name="Address" type="&vCard;Address">
            <properties>
                <property name="postCode" type="String" uri="&vCard;postal_code"/>
                <property name="streetAddress" type="String" uri="&vCard;street_address"/>
            </properties>
        </GabotoBean>
<!--
		<GabotoBean name="AccessRight" type="&oxp;AccessRight">
        	<properties>
        		<property name="userType" type="String" collection="bag" uri="&oxp;userType"/>
        		<property name="transportMode" type="String" collection="bag" uri="&oxp;transportMode"/>
        		<property name="applicableTimes" type="String" uri="&oxp;applicableTimes"/>
        		<property name="interventionRequired" type="boolean" uri="&oxp;interventionRequired"/>
        	</properties>
        </GabotoBean>

		<GabotoBean name="Access" type="&oxp;Access">
            <properties>
                <property name="accessFrom" type="Place" uri="&oxp;accessFrom"/>
                <property name="accessTo" type="Place" uri="&oxp;accessTo"/>
                <property name="accessRights" type="AccessRight" uri="&oxp;accessRights"/>
                <property name="incline" type="String" uri="&oxp;incline"/>
            </properties>
        </GabotoBean>
-->
        
    </GabotoBeans>


    <GabotoEntities>

        <!-- Common base class -->
        <GabotoEntity name="OxpEntity" type="&oxp;OxpEntity" abstract="true">

            <properties>
                <property name="images" type="Image" collection="bag" uri="&foaf;depiction"/>
                <property name="sameAss" type="Website" collection="bag" uri="&owl;sameAs"/>
                <property name="description" type="String" uri="&dc;description"/>
                <property name="dcType" collection="bag" type="String" uri="&dc;type"/>
            </properties>

            <GabotoEntities>
                
                        
                        
                <GabotoEntity name="Image" type="&foaf;Image">
                    <properties>
                        <property name="width" type="String" uri="&exif;width"/>

                        <property name="height" type="String" uri="&exif;height"/>
                        
                        <property name="title" type="String" uri="&dc;title"/>
                        <property name="date" type="String" uri="&dc;date"/>
                        
                        <property name="longitude" type="Float" uri="&geo;long"/>
                        <property name="latitude" type="Float" uri="&geo;lat"/>
                        
                        <passiveProperty name="imageContents" type="OxpEntity"
                            relationshipType="N:M" uri="&foaf;depiction"/>
                    </properties>

                </GabotoEntity>

                <GabotoEntity name="Place" type="&oxp;Place">
                    <properties>
                        <property name="name" type="String" uri="&dc;title"/>

                        <property name="OBNCode"  type="String" uri="&oxp;hasOBNCode"/>
                        <property name="parent" type="Place"
                            uri="&dct;isPartOf">
                            <indirectProperty uri="&geo;long"/>
                            <indirectProperty uri="&geo;lat"/>
                            <unstoredProperty uri="&gabotoKML;parent"/>
                        </property>

                        <property name="longitude" type="Float" uri="&geo;long"/>
                        <property name="latitude" type="Float" uri="&geo;lat"/>
                        
                        <property name="address" type="Address" uri="&vCard;adr"/>

                        <property name="homepage" type="Website" uri="&foaf;homepage"/>

                        <passiveProperty name="containedPlaces" type="Place" relationshipType="1:N"
                            uri="&dct;isPartOf"/>
                            
						<property name="osmId" type="String" uri="&oxp;hasOSMIdentifier"/>

                    </properties>

                    <GabotoEntities>
                        <GabotoEntity name="Outside" type="&oxp;Outside"/>
<!--                        
                        <GabotoEntity name="Portal" type="&oxp;Portal">
                            <properties>
                                <property name="format" collection="bag" type="String" uri="&dc;format"/>
                                <property name="accesses" type="Access" uri="&oxp;accesses"/>
                            </properties>
                        </GabotoEntity>
-->
                        
                        <GabotoEntity name="Building" type="&oxp;Building">
                            <properties>
                                <passiveProperty name="occupiedBy" type="Unit"
                                    relationshipType="N:M" uri="&oxp;occupies"/>
                            </properties>

                        </GabotoEntity>

                        <GabotoEntity name="Carpark" type="&oxp;Carpark">
                            <properties>
                                <property name="capacity" type="Integer" uri="&oxp;capacity"/>
                            </properties>
                        </GabotoEntity>

                        <GabotoEntity name="DrainCover" type="&oxp;DrainCover"/>

                        <GabotoEntity486 name="Entrance" type="&oxp;Entrance"/>

                        <GabotoEntity name="Room" type="&oxp;Room"/>

                        <GabotoEntity name="Site" type="&oxp;Site"/>

                        <GabotoEntity name="Space" type="&oxp;Space"/>

                        <GabotoEntity name="WAP" type="&oxp;WAP"/>
                        
                        <GabotoEntity name="Quadrangle" type="&oxp;Quadrangle"/>
                    </GabotoEntities>
                </GabotoEntity>

                <GabotoEntity name="Unit" type="&oxp;Unit">
                    <properties>
                        <property name="OUCSCode" type="String" uri="&oxp;hasOUCSCode"/>
                        <property name="address" type="Address" uri="&vCard;adr"/>

                        <property name="homepage" type="Website" uri="&foaf;homepage"/>

                        <property name="itHomepage" type="Website" uri="&oxp;hasITHomepage"/>

                        <property name="name" type="String" uri="&dc;title"/>

                        <property name="occupiedPlaces" type="Place" collection="bag"
                            uri="&oxp;occupies">
                            <indirectProperty uri="&geo;long" n="2"/>
                            <indirectProperty uri="&geo;lat" n="2"/>
                        </property>

                        <property name="primaryPlace" type="Place" uri="&oxp;primaryPlace">
                            <indirectProperty name="longitude" uri="&geo;long" n="1"/>
                            <indirectProperty name="latitude" uri="&geo;lat" n="1"/>
                        </property>

                        <property name="parent" type="Unit" uri="&dct;isPartOf">
                            <indirectProperty uri="&geo;long" n="3"/>
                            <indirectProperty uri="&geo;lat" n="3"/>
                            <unstoredProperty uri="&gabotoKML;parent"/>
                        </property>

                        <property name="weblearn" type="Website" uri="&oxp;hasWeblearn"/>

                        <passiveProperty name="hasChildren" type="Unit" relationshipType="1:N"
                            uri="&dct;isPartOf"/>

                    </properties>

<!--
                    <customMethods>
                        <method>
                            <![CDATA[
    @StaticProperty("http://purl.org/dc/elements/1.1/description")
    public String getDescription(){
        String description = "";
        
        if(getHomepage() != null)
            description += "Website: <a href=\"" + getHomepage().getUri() + "\">" + getHomepage().getUri() + "</a><br/>";
        if(getImages() != null && getImages().size() > 0){
        	Image img = getImages().iterator().next();
        	description += "<img src=\"" + img.getUri() + "\" width=\"" + img.getWidth() + "\" height=\"" + img.getHeight() + "\"/>";
        }
        
        return description;
    }
                    ]]>
                        </method>
                    </customMethods>-->

                    <GabotoEntities>
                        <GabotoEntity name="College" type="&oxp;College"/>

						<GabotoEntity name="University" type="&oxp;University"/>

						<GabotoEntity name="Hall" type="&oxp;Hall"/>

                        <GabotoEntity name="Department" type="&oxp;Department"/>

                        <GabotoEntity name="Division" type="&oxp;Division"/>

                        <GabotoEntity name="Faculty" type="&oxp;Faculty"/>

                        <GabotoEntity name="Group" type="&oxp;Group"/>

                        <GabotoEntity name="Library" type="&oxp;Library">
                            <properties>
                                <property name="OLISCode" type="String" uri="&oxp;hasOLISCode"/>
                                
                                <property name="libraryHomepage" type="Website"
                                    uri="&oxp;hasLibraryHomepage"/>
                            </properties>
                            <GabotoEntities>
                             <GabotoEntity name="SubLibrary" type="&oxp;SubLibrary">
                             	<properties>
                             	<property name="sublocationType" type="String"
                             		uri="&oxp;sublocationType"/>
                             	</properties>
                             </GabotoEntity>
                            </GabotoEntities>
                        </GabotoEntity>
                        
                        <GabotoEntity name="Museum" type="&oxp;Museum"/>

                        <GabotoEntity name="ServiceDepartment" type="&oxp;ServiceDepartment"/>
                    </GabotoEntities>
                </GabotoEntity>

                <GabotoEntity name="Website" type="&oxp;Website">
                    <properties>
                        <passiveProperty name="isWeblearnIn" type="OxpEntity" relationshipType="1:N"
                            uri="&oxp;hasWeblearn"/>

                        <passiveProperty name="isITHomepageIn" type="OxpEntity"
                            relationshipType="1:N" uri="&oxp;hasITHomepage"/>

                        <passiveProperty name="isHomepageIn" type="OxpEntity" relationshipType="1:N"
                            uri="&oxp;hasHomepage"/>

                        <passiveProperty name="isLibraryHomepageIn" type="OxpEntity"
                            relationshipType="1:N" uri="&oxp;hasLibraryHomepage"/>
                    </properties>
                </GabotoEntity>

            </GabotoEntities>


        </GabotoEntity>
    </GabotoEntities>
</Gaboto>
